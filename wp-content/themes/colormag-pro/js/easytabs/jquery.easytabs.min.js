!function(T){T.easytabs=function(a,t){var i,n,h,b,p,u,f=this,g=T(a),s={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,event:"click",panelContext:g},e={fast:200,normal:400,slow:600};f.init=function(){f.settings=u=T.extend({},s,t),u.bind_str=u.event+".easytabs",u.uiTabs&&(u.tabActiveClass="ui-tabs-selected",u.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",u.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",u.tabClass="ui-state-default ui-corner-top",u.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),u.collapsible&&void 0!==t.defaultTab&&void 0===t.collpasedByDefault&&(u.collapsedByDefault=!1),"string"==typeof u.animationSpeed&&(u.animationSpeed=e[u.animationSpeed]),T("a.anchor").remove().prependTo("body"),g.data("easytabs",{}),f.setTransitions(),f.getTabs(),l(),o(),d(),m(),w(),g.attr("data-easytabs",!0)},f.setTransitions=function(){h=u.animate?{show:u.transitionIn,hide:u.transitionOut,speed:u.animationSpeed,collapse:u.transitionCollapse,uncollapse:u.transitionUncollapse,halfSpeed:u.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},f.getTabs=function(){var e;f.tabs=g.find(u.tabs),f.panels=T(),f.tabs.each(function(){var a=T(this),t=a.children("a"),s=a.children("a").data("target");a.data("easytabs",{}),null!=s?a.data("easytabs").ajax=t.attr("href"):s=t.attr("href"),s=s.match(/#([^\?]+)/)[1],(e=u.panelContext.find("#"+s)).length?(e.data("easytabs",{position:e.css("position"),visibility:e.css("visibility")}),e.not(u.panelActiveClass).hide(),f.panels=f.panels.add(e),a.data("easytabs").panel=e):(f.tabs=f.tabs.not(a),"console"in window&&console.warn("Warning: tab without matching panel for selector '#"+s+"' removed from set"))})},f.selectTab=function(a,t){window.location.hash.match(/^[^\?]*/)[0];var s=a.parent().data("easytabs").panel,e=a.parent().data("easytabs").ajax;u.collapsible&&!p&&(a.hasClass(u.tabActiveClass)||a.hasClass(u.collapsedClass))?f.toggleTabCollapse(a,s,e,t):a.hasClass(u.tabActiveClass)&&s.hasClass(u.panelActiveClass)&&u.cache||r(a,s,e,t)},f.toggleTabCollapse=function(e,i,a,t){f.panels.stop(!0,!0),C(g,"easytabs:before",[e,i,u])&&(f.tabs.filter("."+u.tabActiveClass).removeClass(u.tabActiveClass).children().removeClass(u.tabActiveClass),e.hasClass(u.collapsedClass)?(!a||u.cache&&e.parent().data("easytabs").cached||(g.trigger("easytabs:ajax:beforeSend",[e,i]),i.load(a,function(a,t,s){e.parent().data("easytabs").cached=!0,g.trigger("easytabs:ajax:complete",[e,i,a,t,s])})),e.parent().removeClass(u.collapsedClass).addClass(u.tabActiveClass).children().removeClass(u.collapsedClass).addClass(u.tabActiveClass),i.addClass(u.panelActiveClass)[h.uncollapse](h.speed,u.transitionUncollapseEasing,function(){g.trigger("easytabs:midTransition",[e,i,u]),"function"==typeof t&&t()})):(e.addClass(u.collapsedClass).parent().addClass(u.collapsedClass),i.removeClass(u.panelActiveClass)[h.collapse](h.speed,u.transitionCollapseEasing,function(){g.trigger("easytabs:midTransition",[e,i,u]),"function"==typeof t&&t()})))},f.matchTab=function(a){return f.tabs.find("[href='"+a+"'],[data-target='"+a+"']").first()},f.matchInPanel=function(a){return a&&f.validId(a)?f.panels.filter(":has("+a+")").first():[]},f.validId=function(a){return a.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)},f.selectTabFromHashChange=function(){var a,t=window.location.hash.match(/^[^\?]*/)[0],s=f.matchTab(t);u.updateHash&&(s.length?(p=!0,f.selectTab(s)):(a=f.matchInPanel(t)).length?(t="#"+a.attr("id"),s=f.matchTab(t),p=!0,f.selectTab(s)):i.hasClass(u.tabActiveClass)||u.cycle||(""===t||f.matchTab(b).length||g.closest(t).length)&&(p=!0,f.selectTab(n)))},f.cycleTabs=function(a){u.cycle&&(a%=f.tabs.length,$tab=T(f.tabs[a]).children("a").first(),p=!0,f.selectTab($tab,function(){setTimeout(function(){f.cycleTabs(a+1)},u.cycle)}))},f.publicMethods={select:function(a){var t;0===(t=f.tabs.filter(a)).length?0===(t=f.tabs.find("a[href='"+a+"']")).length&&0===(t=f.tabs.find("a"+a)).length&&0===(t=f.tabs.find("[data-target='"+a+"']")).length&&0===(t=f.tabs.find("a[href$='"+a+"']")).length&&T.error("Tab '"+a+"' does not exist in tab set"):t=t.children("a").first(),f.selectTab(t)}};var C=function(a,t,s){var e=T.Event(t);return a.trigger(e,s),!1!==e.result},l=function(){g.addClass(u.containerClass),f.tabs.parent().addClass(u.tabsClass),f.tabs.addClass(u.tabClass),f.panels.addClass(u.panelClass)},o=function(){var a,t=window.location.hash.match(/^[^\?]*/)[0],s=f.matchTab(t).parent();1===s.length?(i=s,u.cycle=!1):(a=f.matchInPanel(t)).length?(t="#"+a.attr("id"),i=f.matchTab(t).parent()):0===(i=f.tabs.parent().find(u.defaultTab)).length&&T.error("The specified default tab ('"+u.defaultTab+"') could not be found in the tab set ('"+u.tabs+"') out of "+f.tabs.length+" tabs."),n=i.children("a").first(),c(s)},c=function(a){var e,t;u.collapsible&&0===a.length&&u.collapsedByDefault?i.addClass(u.collapsedClass).children().addClass(u.collapsedClass):(e=T(i.data("easytabs").panel),!(t=i.data("easytabs").ajax)||u.cache&&i.data("easytabs").cached||(g.trigger("easytabs:ajax:beforeSend",[n,e]),e.load(t,function(a,t,s){i.data("easytabs").cached=!0,g.trigger("easytabs:ajax:complete",[n,e,a,t,s])})),i.data("easytabs").panel.show().addClass(u.panelActiveClass),i.addClass(u.tabActiveClass).children().addClass(u.tabActiveClass)),g.trigger("easytabs:initialised",[n,e])},d=function(){f.tabs.children("a").bind(u.bind_str,function(a){u.cycle=!1,p=!1,f.selectTab(T(this)),a.preventDefault?a.preventDefault():a.returnValue=!1})},r=function(e,i,a,t){if(f.panels.stop(!0,!0),C(g,"easytabs:before",[e,i,u])){var s,n,l,o,c=f.panels.filter(":visible"),d=i.parent(),r=window.location.hash.match(/^[^\?]*/)[0];u.animate&&(s=v(i),n=c.length?y(c):0,l=s-n),b=r,o=function(){g.trigger("easytabs:midTransition",[e,i,u]),u.animate&&"fadeIn"==u.transitionIn&&l<0&&d.animate({height:d.height()+l},h.halfSpeed).css({"min-height":""}),u.updateHash&&!p?window.location.hash="#"+i.attr("id"):p=!1,i[h.show](h.speed,u.transitionInEasing,function(){d.css({height:"","min-height":""}),g.trigger("easytabs:after",[e,i,u]),"function"==typeof t&&t()})},!a||u.cache&&e.parent().data("easytabs").cached||(g.trigger("easytabs:ajax:beforeSend",[e,i]),i.load(a,function(a,t,s){e.parent().data("easytabs").cached=!0,g.trigger("easytabs:ajax:complete",[e,i,a,t,s])})),u.animate&&"fadeOut"==u.transitionOut&&(0<l?d.animate({height:d.height()+l},h.halfSpeed):d.css({"min-height":d.height()})),f.tabs.filter("."+u.tabActiveClass).removeClass(u.tabActiveClass).children().removeClass(u.tabActiveClass),f.tabs.filter("."+u.collapsedClass).removeClass(u.collapsedClass).children().removeClass(u.collapsedClass),e.parent().addClass(u.tabActiveClass).children().addClass(u.tabActiveClass),f.panels.filter("."+u.panelActiveClass).removeClass(u.panelActiveClass),i.addClass(u.panelActiveClass),c.length?c[h.hide](h.speed,u.transitionOutEasing,o):i[h.uncollapse](h.speed,u.transitionUncollapseEasing,o)}},v=function(a){if(a.data("easytabs")&&a.data("easytabs").lastHeight)return a.data("easytabs").lastHeight;var t,s,e=a.css("display");try{t=T("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(a){t=T("<div></div>",{visibility:"hidden",overflow:"hidden"})}return s=a.wrap(t).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight(),a.unwrap(),a.css({position:a.data("easytabs").position,visibility:a.data("easytabs").visibility,display:e}),a.data("easytabs").lastHeight=s},y=function(a){var t=a.outerHeight();return a.data("easytabs")?a.data("easytabs").lastHeight=t:a.data("easytabs",{lastHeight:t}),t},m=function(){"function"==typeof T(window).hashchange?T(window).hashchange(function(){f.selectTabFromHashChange()}):T.address&&"function"==typeof T.address.change&&T.address.change(function(){f.selectTabFromHashChange()})},w=function(){var a;u.cycle&&(a=f.tabs.index(i),setTimeout(function(){f.cycleTabs(a+1)},u.cycle))};f.init()},T.fn.easytabs=function(s){var e=arguments;return this.each(function(){var a=T(this),t=a.data("easytabs");if(void 0===t&&(t=new T.easytabs(this,s),a.data("easytabs",t)),t.publicMethods[s])return t.publicMethods[s](Array.prototype.slice.call(e,1))})}}(jQuery);