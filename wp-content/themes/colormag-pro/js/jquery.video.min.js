function onYouTubeIframeAPIReady(){if(void 0!==$.video)for(callback_index in $.video.global.youtube_api_ready_callbacks)$.video.global.youtube_api_ready_callbacks[callback_index]()}var video_postmessage_event_func="attachEvent",video_postmessage_event="onmessage";window.addEventListener&&(video_postmessage_event_func="addEventListener",video_postmessage_event="message"),window[video_postmessage_event_func](video_postmessage_event,function(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;var t=JSON.parse(e.data),i=void 0===t.event?null:t.event,a=(void 0===t.method||t.method,$("#"+t.player_id)),o=a.getVideoConfig();switch(null==o&&(a.initVideo(),o=a.getVideoConfig()),i){case"ready":$.video.vimeo_postmessage(a,"addEventListener","play"),$.video.vimeo_postmessage(a,"addEventListener","pause"),$.video.vimeo_postmessage(a,"addEventListener","finish"),a.data("video-player",a),a.attr(o.attr_ready,""),a.trigger("ready"+$.video.global.event_suffix);break;case"play":a.removeAttr(o.attr_paused),a.attr(o.attr_playing,""),a.trigger("play"+$.video.global.event_suffix);break;case"pause":a.removeAttr(o.attr_playing),a.attr(o.attr_paused,""),a.trigger("pause"+$.video.global.event_suffix);break;case"finish":a.removeAttr(o.attr_playing),a.removeAttr(o.attr_paused),a.trigger("finish"+$.video.global.event_suffix)}},!1),function(r){r.video={global:{event_suffix:"_video",youtube_api_ready_callbacks:[],youtube_iframe_api:"https://www.youtube.com/iframe_api"},config:{attr_ready:"data-video-ready",attr_playing:"data-video-playing",attr_paused:"data-video-paused"}};function n(t,i){var a=t.data("video").config;if(void 0===t.data("video-player")){function e(){var e=new YT.Player(t[0],{events:{onReady:function(e){t.attr(a.attr_ready,""),i(e.target)},onStateChange:function(e){switch(e.data){case 0:t.removeAttr(a.attr_paused),t.removeAttr(a.attr_playing),t.trigger("finish"+r.video.global.event_suffix);break;case 1:t.removeAttr(a.attr_paused),t.attr(a.attr_playing,""),t.trigger("play"+r.video.global.event_suffix);break;case 2:t.removeAttr(a.attr_playing),t.attr(a.attr_paused,""),t.trigger("pause"+r.video.global.event_suffix)}}}});t.data("video-player",e)}"undefined"==typeof YT||void 0===YT.Player?(r.video.global.youtube_api_ready_callbacks.push(function(){e()}),0==r('script[src="https://www.youtube.com/iframe_api"]').length&&0==r('script[src="http://www.youtube.com/iframe_api"]').length&&r("<script><\/script>").attr("src",r.video.global.youtube_iframe_api).insertBefore(r("script").first())):e()}else i(t.data("video-player"))}function d(e,t){void 0!==e.data("video-player")&&t(e.data("video-player"))}r.video.vimeo_postmessage=function(e,t,i){var a={method:t};i&&(a.value=i),void 0!==e[0]&&e[0].contentWindow.postMessage(JSON.stringify(a),"*")},r.fn.getVideoConfig=function(){var e=r(this).first();return void 0!==e.data("video")?e.data("video").config:null},r.fn.getVideoPlayer=function(){var e=r(this).first();return void 0!==e.data("video-player")?e.data("video-player"):null},r.fn.getVideoType=function(){var e=r(this).first();return video_type="video"==e.prop("tagName").toLowerCase()?"video":-1!==e.attr("src").indexOf("youtube.com/embed")?"youtube":-1!==e.attr("src").indexOf("player.vimeo.com/video")?"vimeo":"undefined",video_type},r.fn.initVideo=function(o){return this.each(function(){var t=r(this),e=t.getVideoType(),i=t.getVideoConfig();if(null!=i)return console.warn("Player already initialized!"),!1;if(i=r.extend(r.extend({},r.video.config),o),t.data("video",{config:i}),"youtube"==e)-1==t.attr("src").indexOf("enablejsapi=true")&&-1==t.attr("src").indexOf("enablejsapi=1")&&(-1==t.attr("src").indexOf("?")?t.attr("src",t.attr("src")+"?enablejsapi=1"):t.attr("src",t.attr("src")+"&enablejsapi=1"));else if("vimeo"==e&&(-1==t.attr("src").indexOf("api=true")&&-1==t.attr("src").indexOf("api=1")&&(-1==t.attr("src").indexOf("?")?t.attr("src",t.attr("src")+"?api=1"):t.attr("src",t.attr("src")+"&api=1")),-1==t.attr("src").indexOf("player_id="))){var a=t.attr("id");void 0===a&&(a="video-"+Math.round((new Date).getTime()+100*Math.random()),t.attr("id",a)),-1==t.attr("src").indexOf("?")?t.attr("src",t.attr("src")+"?player_id="+a):t.attr("src",t.attr("src")+"&player_id="+a)}"video"==e?(4==t.get(0).readyState?(t.attr(i.attr_ready,""),t.trigger("ready"+r.video.global.event_suffix)):t.get(0).addEventListener("canplaythrough",function(){t.attr(i.attr_ready,""),t.trigger("ready"+r.video.global.event_suffix),t.get(0).removeEventListener("canplaythrough",this)},!1),t.bind("play",function(){t.removeAttr(i.attr_paused),t.attr(i.attr_playing,""),t.trigger("play"+r.video.global.event_suffix)}),t.bind("pause",function(){t.removeAttr(i.attr_playing),t.attr(i.attr_paused,""),t.trigger("pause"+r.video.global.event_suffix)}),t.bind("ended",function(){t.removeAttr(i.attr_playing),t.removeAttr(i.attr_paused),t.trigger("finish"+r.video.global.event_suffix)}),t.data("video-player",t[0])):"youtube"==e?n(t,function(e){t.trigger("ready"+r.video.global.event_suffix)}):"vimeo"==e&&d(t,function(e){t.trigger("ready"+r.video.global.event_suffix)})})},r.fn.playVideo=function(){return this.each(function(){var e=r(this),t=e.getVideoType(),i=e.getVideoPlayer();if(null==i)return console.warn("Player not initialized!"),!1;"video"==t?i.play():"youtube"==t?n(e,function(e){e.playVideo()}):"vimeo"==t&&d(e,function(e){r.video.vimeo_postmessage(e,"play")})})},r.fn.pauseVideo=function(){return this.each(function(){var e=r(this),t=e.getVideoType(),i=e.getVideoPlayer();if(null==i)return console.warn("Player not initialized!"),!1;"video"==t?i.pause():"youtube"==t?n(e,function(e){e.pauseVideo()}):"vimeo"==t&&d(e,function(e){r.video.vimeo_postmessage(e,"pause")})})},r.fn.stopVideo=function(){return this.each(function(){var e=r(this),t=e.getVideoType(),i=e.getVideoPlayer();if(null==i)return console.warn("Player not initialized!"),!1;"video"==t?(i.pause(),i.currentTime=0):"youtube"==t?n(e,function(e){e.seekTo(e.getDuration())}):"vimeo"==t&&d(e,function(e){r.video.vimeo_postmessage(e,"unload")})})},r.fn.restartVideo=function(){return this.each(function(){var t=r(this),e=t.getVideoType(),i=t.getVideoPlayer();t.getVideoConfig();if(null==i)return console.warn("Player not initialized!"),!1;"video"==e?(i.currentTime=0,i.play()):"youtube"==e?n(t,function(e){e.seekTo(0),e.playVideo(),t.trigger("restart"+r.video.global.event_suffix)}):"vimeo"==e&&d(t,function(e){r.video.vimeo_postmessage(e,"seekTo","0"),r.video.vimeo_postmessage(e,"play"),t.trigger("restart"+r.video.global.event_suffix)})})},r.fn.muteVideo=function(){return this.each(function(){var e=r(this),t=e.getVideoType(),i=e.getVideoPlayer();if(null==i)return console.warn("Player not initialized!"),!1;"video"==t?i.muted=!0:"youtube"==t?n(e,function(e){e.mute()}):"vimeo"==t&&d(e,function(e){r.video.vimeo_postmessage(e,"setVolume","0")})})},r.fn.unmuteVideo=function(){return this.each(function(){var e=r(this),t=e.getVideoType(),i=e.getVideoPlayer();if(null==i)return console.warn("Player not initialized!"),!1;"video"==t?i.muted=!1:"youtube"==t?n(e,function(e){e.unMute()}):"vimeo"==t&&d(e,function(e){r.video.vimeo_postmessage(e,"setVolume",1)})})},r.fn.seekToVideo=function(a){return this.each(function(){var e=r(this),t=e.getVideoType(),i=e.getVideoPlayer();if(null==i)return console.warn("Player not initialized!"),!1;"video"==t?i.currentTime=a:"youtube"==t?n(e,function(e){e.seekTo(a)}):"vimeo"==t&&d(e,function(e){r.video.vimeo_postmessage(e,"seekTo",a)})})},r.fn.destroyVideo=function(){return this.each(function(){var e=r(this),t=(e.getVideoType(),e.getVideoPlayer(),e.getVideoConfig());null!=t&&(e.removeData("video"),e.removeData("video-player"),e.removeAttr(t.attr_ready),e.removeAttr(t.attr_playing),e.removeAttr(t.attr_paused),e.trigger("destroy"+r.video.global.event_suffix))})},r.fn.addVideoEvent=function(e,o){return this.each(function(){var t=r(this),i=t.getVideoType(),a=t.getVideoPlayer();"play"!=e||"video"!=i||void 0===t.get(0).paused||t.get(0).paused||o(null,t,i,a),t.bind(e+r.video.global.event_suffix,function(e){o(e,t,i,a)})})},r.fn.removeVideoEvent=function(e){return this.each(function(){r(this).unbind(e+r.video.global.event_suffix)})},r.fn.video=function(){var t="init",i={};return i="string"==typeof arguments[0]?(t=arguments[0],arguments[1]):arguments[0],this.each(function(){var e=r(this);switch(t){case"init":e.initVideo(i);break;case"play":e.playVideo();break;case"pause":e.pauseVideo();break;case"stop":e.stopVideo();break;case"restart":e.restartVideo();break;case"mute":e.muteVideo();break;case"unmute":e.unmuteVideo();break;case"seekTo":e.seekToVideo(i);break;case"destroy":e.destroyVideo();break;case"addEvent":e.addVideoEvent(i[0],i[1]);break;case"removeEvent":e.removeVideoEvent(i[0]);break;default:console.warn('Video action "'+t+'" not found')}})}}(jQuery);